<script lang="ts">
	import { page } from '$app/stores';
	import { Text } from '@sveltejs/site-kit/components';
	import { setupDocsHovers } from '@sveltejs/site-kit/docs';
	import Byline from '../Byline.svelte';

	let { data } = $props();

	setupDocsHovers();
</script>

<svelte:head>
	<title>{data.metadata.title}</title>

	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:title" content={data.metadata.title} />
	<meta name="twitter:description" content={data.metadata.description} />
	<meta name="Description" content={data.metadata.description} />

	<meta name="twitter:image" content="https://svelte.dev/blog/{$page.params.slug}/card.png" />
	<meta name="og:image" content="https://svelte.dev/blog/{$page.params.slug}/card.png" />
</svelte:head>

<div class="content">
	<article class="post listify text">
		<h1>{data.metadata.title}</h1>
		<p class="standfirst">{data.metadata.description}</p>

		<Byline post={data} />

		<Text>
			{@html data.body}
		</Text>
	</article>
</div>

<style>
	.post {
		padding: var(--sk-page-padding-top) var(--sk-page-padding-side);
		max-width: var(--sk-page-content-width);
		box-sizing: content-box;
		margin: 0 auto;

		:global {
			figure {
				margin: 1.6rem 0 3.2rem 0;

				img {
					max-width: 100%;
				}

				figcaption {
					color: var(--sk-text-4);
					text-align: left;
					font-size: var(--sk-font-size-body-small);
				}
			}

			video {
				width: 100%;
			}

			aside {
				float: right;
				margin: 0 0 1em 1em;
				width: 16rem;
				z-index: 2;

				p {
					color: var(--sk-text-4);
					font-family: var(--sk-font-body);
					font-size: var(--sk-font-size-body-small);

					&:first-child {
						margin-top: 0;
					}

					&:last-child {
						margin-bottom: 0;
					}
				}
			}

			.max {
				width: 100%;
			}

			iframe {
				width: 100%;
				height: 420px;
				margin: 2em 0;
				border-radius: var(--sk-border-radius);
				border: 0.8rem solid var(--sk-theme-4);
			}

			blockquote {
				background: none;

				&::before {
					content: 'â€œ';
					position: absolute;
					font-size: 6.4em;
					line-height: 1;
					left: 0;
					top: 0;
					font-family: var(--sk-font-heading);
					color: var(--sk-text-4);
				}
			}
		}
	}

	h1 {
		font-size: var(--sk-font-size-h1);
	}

	.standfirst {
		font-size: var(--sk-font-size-body-small);
		color: var(--sk-text-3);
		margin: 0 0 1em 0;
	}

	@media (min-width: 960px) {
		.post :global {
			.max {
				width: 100vw;
				/* padding: 0 var(--sk-page-padding-side); */
				margin-left: calc(var(--sk-page-content-width) / 2 - 50vw);
				text-align: center;

				& > * {
					width: 100%;
					max-width: 1200px;
				}
			}

			iframe {
				width: 100%;
				max-width: 1100px;
				margin: 2em auto;
			}
		}
	}
</style>
