.codemirror-wrapper {
	height: 100%;
}

.cm-editor {
	height: 100%;

	.cm-scroller {
		font: var(--sk-font-mono);
	}

	.cm-gutters {
		background: var(--sk-back-3);
		border-right: none;
		padding: 0;
		width: 5rem;
	}

	.cm-activeLine {
		background: var(--sk-back-translucent);
	}

	.cm-activeLineGutter {
		background-color: var(--sk-back-3);
	}

	.cm-lineNumbers {
		flex: 1;
		color: #237893;
	}

	.cm-foldGutter {
		width: 1rem;
	}

	&.cm-focused .cm-cursor {
		border-left-color: var(--sk-text-3);
	}

	.cm-content {
		padding: 1rem 0;
	}

	.cm-line {
		padding: 0 1rem;
	}

	.cm-selectionBackground {
		border-radius: 2px;
	}

	.cm-selectionMatch {
		background: var(--selection-color);
		color: var(--sk-text-2);
	}

	.cm-tooltip.cm-tooltip-autocomplete > ul {
		font: var(--sk-font-mono);
	}

	.cm-panels {
		background: var(--sk-back-4);
		color: var(--sk-text-1);
	}

	.cm-panels.cm-panels-top,
	.cm-panels.cm-panels-bottom {
		border-top: 1px solid var(--sk-back-5);
		border-bottom: 1px solid var(--sk-back-5);
	}

	.cm-button {
		background: var(--sk-back-5);
		border: 2px solid transparent;
	}

	.cm-textfield {
		background: var(--sk-back-1);
		color: var(--sk-text-1);
		border: 2px solid transparent;
	}

	.cm-search button:focus-visible,
	.cm-search input:focus-visible {
		border: 2px solid var(--flash);
	}

	.cm-search input[type='checkbox']:focus-visible {
		outline: 2px solid var(--flash);
	}

	.cm-tooltip {
		--warning: hsl(40 100% 70%);
		--error: hsl(0 100% 90%);
		border: none;
		background: var(--sk-back-3);
		font: var(--sk-font-ui-small);
		max-width: calc(100vw - 10em);
		position: relative;
		filter: drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.1));

		:root.dark {
			--warning: hsl(40 100% 50%);
			--error: hsl(0 100% 70%);
		}
	}

	.cm-tooltip-section {
		position: relative;
		padding: 0.5em;
		left: -13px;
		background: var(--bg);
		border-radius: 2px;
		max-width: 64em;
	}

	.cm-tooltip-section::before {
		content: '';
		position: absolute;
		left: 10px;
		width: 8px;
		height: 8px;
		transform: rotate(45deg);
		background-color: var(--bg);
		border-radius: 2px;
	}

	.cm-tooltip-below .cm-tooltip-section {
		top: 10px;
	}

	.cm-tooltip-above .cm-tooltip-section {
		bottom: 10px;
	}

	.cm-tooltip-below .cm-tooltip-section::before {
		top: -4px;
	}

	.cm-tooltip-above .cm-tooltip-section::before {
		bottom: -4px;
	}

	.cm-tooltip:has(.cm-diagnostic) {
		background: transparent;
	}

	.cm-tooltip:has(.cm-diagnostic-warning) {
		--bg: var(--warning);
		--fg: #222;
	}

	.cm-tooltip:has(.cm-diagnostic-error) {
		--bg: var(--error);
		--fg: #222;
	}

	.cm-diagnostic {
		padding: 0.2em 0.4em;
		position: relative;
		border: none;
		border-radius: 2px;
	}

	.cm-diagnostic:not(:last-child) {
		border-bottom: 1px solid rgba(0, 0, 0, 0.1);
	}

	.cm-diagnostic-error {
		border: none;
		filter: drop-shadow(0px 0px 6px var(--error-bg));
	}

	.cm-diagnostic :not(code) {
		font: var(--sk-font-ui-small);
	}

	.cm-diagnosticText {
		color: var(--fg);
		position: relative;
		z-index: 2;
	}

	.cm-diagnosticText code {
		color: inherit;
		background-color: rgba(0, 0, 0, 0.05);
		border-radius: 2px;
		top: 0;
		padding: 0.2em;
		font-size: 1em;
	}

	.cm-diagnosticText strong {
		font: var(--sk-font-mono);
		opacity: 0.7;
	}
}
